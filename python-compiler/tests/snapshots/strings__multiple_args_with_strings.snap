---
source: tests/strings.rs
expression: llvm_ir
---
; ModuleID = 'main'
source_filename = "main"

@str_literal = private unnamed_addr constant [7 x i8] c"Value:\00", align 1
@int_format_no_nl.1 = private unnamed_addr constant [3 x i8] c"%d\00", align 1
@string_format_no_nl.8 = private unnamed_addr constant [3 x i8] c"%s\00", align 1
@float_format_string = private unnamed_addr constant [4 x i8] c"%f\0A\00", align 1

; Function Attrs: nounwind
define noundef i32 @main() local_unnamed_addr #0 {
entry:
  %malloc_str = tail call dereferenceable_or_null(7) ptr @malloc(i64 7)
  tail call void @llvm.memcpy.p0.p0.i64(ptr noundef nonnull align 1 dereferenceable(7) %malloc_str, ptr noundef nonnull align 1 dereferenceable(7) @str_literal, i64 7, i1 false)
  %ptr_to_int = ptrtoint ptr %malloc_str to i64
  %ptr_payload = and i64 %ptr_to_int, 281474976710655
  %payload_to_ptr = inttoptr i64 %ptr_payload to ptr
  %printf_string = tail call i32 (ptr, ...) @printf(ptr nonnull dereferenceable(1) @string_format_no_nl.8, ptr %payload_to_ptr)
  %putchar = tail call i32 @putchar(i32 32)
  %printf_int9 = tail call i32 (ptr, ...) @printf(ptr nonnull dereferenceable(1) @int_format_no_nl.1, i64 42)
  %putchar61 = tail call i32 @putchar(i32 32)
  %malloc_str13 = tail call dereferenceable_or_null(4) ptr @malloc(i64 4)
  store i32 6581857, ptr %malloc_str13, align 1
  %ptr_to_int15 = ptrtoint ptr %malloc_str13 to i64
  %ptr_payload16 = and i64 %ptr_to_int15, 281474976710655
  %payload_to_ptr50 = inttoptr i64 %ptr_payload16 to ptr
  %printf_string51 = tail call i32 (ptr, ...) @printf(ptr nonnull dereferenceable(1) @string_format_no_nl.8, ptr %payload_to_ptr50)
  %putchar62 = tail call i32 @putchar(i32 32)
  %printf_float59 = tail call i32 (ptr, ...) @printf(ptr nonnull dereferenceable(1) @float_format_string, double 3.140000e+00)
  tail call void @free(ptr %malloc_str)
  ret i32 0
}

; Function Attrs: mustprogress nofree nounwind willreturn allockind("alloc,uninitialized") allocsize(0) memory(inaccessiblemem: readwrite)
declare noalias noundef ptr @malloc(i64 noundef) local_unnamed_addr #1

; Function Attrs: nofree nounwind
declare noundef i32 @printf(ptr nocapture noundef readonly, ...) local_unnamed_addr #2

; Function Attrs: mustprogress nounwind willreturn allockind("free") memory(argmem: readwrite, inaccessiblemem: readwrite)
declare void @free(ptr allocptr nocapture noundef) local_unnamed_addr #3

; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: readwrite)
declare void @llvm.memcpy.p0.p0.i64(ptr noalias nocapture writeonly, ptr noalias nocapture readonly, i64, i1 immarg) #4

; Function Attrs: nofree nounwind
declare noundef i32 @putchar(i32 noundef) local_unnamed_addr #2

attributes #0 = { nounwind }
attributes #1 = { mustprogress nofree nounwind willreturn allockind("alloc,uninitialized") allocsize(0) memory(inaccessiblemem: readwrite) "alloc-family"="malloc" }
attributes #2 = { nofree nounwind }
attributes #3 = { mustprogress nounwind willreturn allockind("free") memory(argmem: readwrite, inaccessiblemem: readwrite) "alloc-family"="malloc" }
attributes #4 = { nocallback nofree nounwind willreturn memory(argmem: readwrite) }
