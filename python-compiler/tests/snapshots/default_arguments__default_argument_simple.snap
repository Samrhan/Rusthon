---
source: tests/default_arguments.rs
expression: llvm_ir
---
; ModuleID = 'main'
source_filename = "main"

@str_literal.1 = private unnamed_addr constant [6 x i8] c"Hello\00", align 1
@str_literal.3 = private unnamed_addr constant [3 x i8] c"Hi\00", align 1

; Function Attrs: mustprogress nofree norecurse nosync nounwind willreturn memory(none)
define i64 @greet(i64 %0, i64 returned %1) local_unnamed_addr #0 {
entry:
  ret i64 %1
}

; Function Attrs: nounwind
define noundef i32 @main() local_unnamed_addr #1 {
entry:
  %malloc_str1 = tail call dereferenceable_or_null(6) ptr @malloc(i64 6)
  tail call void @llvm.memcpy.p0.p0.i64(ptr noundef nonnull align 1 dereferenceable(6) %malloc_str1, ptr noundef nonnull align 1 dereferenceable(6) @str_literal.1, i64 6, i1 false)
  %ptr_to_int3 = ptrtoint ptr %malloc_str1 to i64
  %ptr_payload4 = and i64 %ptr_to_int3, 281474976710655
  %payload_to_ptr = inttoptr i64 %ptr_payload4 to ptr
  %puts = tail call i32 @puts(ptr nonnull dereferenceable(1) %payload_to_ptr)
  %malloc_str14 = tail call dereferenceable_or_null(3) ptr @malloc(i64 3)
  tail call void @llvm.memcpy.p0.p0.i64(ptr noundef nonnull align 1 dereferenceable(3) %malloc_str14, ptr noundef nonnull align 1 dereferenceable(3) @str_literal.3, i64 3, i1 false)
  %ptr_to_int16 = ptrtoint ptr %malloc_str14 to i64
  %ptr_payload17 = and i64 %ptr_to_int16, 281474976710655
  %payload_to_ptr52 = inttoptr i64 %ptr_payload17 to ptr
  %puts56 = tail call i32 @puts(ptr nonnull dereferenceable(1) %payload_to_ptr52)
  tail call void @free(ptr %malloc_str1)
  ret i32 0
}

; Function Attrs: mustprogress nofree nounwind willreturn allockind("alloc,uninitialized") allocsize(0) memory(inaccessiblemem: readwrite)
declare noalias noundef ptr @malloc(i64 noundef) local_unnamed_addr #2

; Function Attrs: mustprogress nounwind willreturn allockind("free") memory(argmem: readwrite, inaccessiblemem: readwrite)
declare void @free(ptr allocptr nocapture noundef) local_unnamed_addr #3

; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: readwrite)
declare void @llvm.memcpy.p0.p0.i64(ptr noalias nocapture writeonly, ptr noalias nocapture readonly, i64, i1 immarg) #4

; Function Attrs: nofree nounwind
declare noundef i32 @puts(ptr nocapture noundef readonly) local_unnamed_addr #5

attributes #0 = { mustprogress nofree norecurse nosync nounwind willreturn memory(none) }
attributes #1 = { nounwind }
attributes #2 = { mustprogress nofree nounwind willreturn allockind("alloc,uninitialized") allocsize(0) memory(inaccessiblemem: readwrite) "alloc-family"="malloc" }
attributes #3 = { mustprogress nounwind willreturn allockind("free") memory(argmem: readwrite, inaccessiblemem: readwrite) "alloc-family"="malloc" }
attributes #4 = { nocallback nofree nounwind willreturn memory(argmem: readwrite) }
attributes #5 = { nofree nounwind }
